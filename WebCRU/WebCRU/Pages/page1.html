<!DOCTYPE html>
<html>
    <head>  
        <title>PORFU</title>
        <link type="image/x-icon" href="../Images/favicon.ico" rel="shortcut icon" />
        <link type="image/ico" href="../Images/favicon.ico" rel="icon" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">
        <link href="../Css/main.css" rel="stylesheet" />
        <link href="../Css/select.css" rel="stylesheet" />
        <link href="../Css/selectize.css" rel="stylesheet" />
        <script src="../Scripts/jquery/jquery-2.1.3.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular-sanitize.js"></script>
        <script src="../Scripts/select/select.js"></script>
        <script src="../Scripts/bootstrap/bootstrap.min.js"></script>
        <script src="../Scripts/bootstrap/ui-bootstrap/ui-bootstrap-tpls-0.13.4.min.js"></script>
        <script src="../Scripts/bootstrap/bootstrap-toggle/bootstrap-toggle-bootstrap-toggle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>

        <script src="../Scripts/inputmask/jquery.inputmask.js"></script>
        <script src="../Scripts/inputmask/jquery.inputmask.numeric.extensions.js"></script>
        <script src="../Scripts/locale/locale_sl.js" type="text/javascript"></script>
        <script src="../Scripts/Controler.js" type="text/javascript"></script>
        <script src="../Scripts/Service.js" type="text/javascript"></script>
        <script src="../Scripts/error/angular-error-handling.js" type="text/javascript"></script>

        <script src="../Scripts/Utils.js" type="text/javascript"></script>

    </head>

    <div>

        <nav class="navbar navbar-deafult">
            <div class="container-fluid">
                <!--
                <div class="navbar-header">
                    <img src="<c:url value="/resources/images/logo.png" />"
                </div>
                !-->
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li class="dropdown"><a class="dropdown-toggle white" data-toggle="dropdown" href="#">Page 1 <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Page 1-1</a></li>
                            <li><a href="#">Page 1-2</a></li>
                            <li><a href="#">Page 1-3</a></li>
                        </ul>
                    </li>
                    <li><a class="white" href="#">Page 2</a></li>
                    <li><a class="white" href="#">Page 3</a></li>
                </ul>
            </div>
        </nav>
    </div>

    <body ng-app="FatcaManagement" ng-controller="FatcaController">

        <table class="tabled" align="center">
            <caption>
                <div>
                    <form id="custom-search-form" class="pull-right">
                        <div class="inline">
                            <input class="search" size="50" type="text" name="input" ng-model="searchString"  placeholder="Search.." required ng-trim="true" />
                        </div>
                        <div class="inline">
                            <button type="submit" class="btn btnSearch" ng-click="getData()">  
                                <span class=" glyphicon glyphicon-search"/>         
                            </button>
                        </div>
                    </form>
                </div>
            </caption>
            <thead class="theadd">
                <tr>
                    <th class="sort" ng-click="sort('Date')">Date
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'Date'" ng-class="{'glyphicon glyphicon-triangle-top':asc,'glyphicon glyphicon-triangle-bottom':!asc}"></span>
                    </th>
                    <th>
                        <span>
                            ReportType
                            <ui-select ng-model="reportTypeSelected.id" theme="selectize" search-enabled="false" ng-click="getReportTypeList()" on-select="getData()" >
                                <ui-select-match>{{$select.selected.id}}</ui-select-match>
                                <ui-select-choices repeat="reportType.id as reportType in reportTypeList | filter:$select.search">
                                    <div ng-bind="reportType.id"></div>
                                </ui-select-choices>
                            </ui-select>
                        </span>
                    </th>
                    <th class="sort" ng-click="sort('tin')">TIN
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'tin'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('ResCountryCode')">ResCountryCode
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'ResCountryCode'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('FirstName')">FirstName
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'FirstName'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('LastName')">LastName
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'LastName'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('Name')">Name
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'Name'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('CountryCode')">CountryCode
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'CountryCode'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('AccountNumber')">AccountNumber
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'AccountNumber'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('AccountBalance')">AccountBalance
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'AccountBalance'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('AccountBalanceUSD')">AccountBalanceUSD
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'AccountBalanceUSD'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('AccountBalanceEUR')">AccountBalanceEUR
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'AccountBalanceEUR'" ng-class="getSortClass()"/>
                    </th>
                    <th class="sort" ng-click="sort('Payment')">Payment
                        <span class="glyphicon sort-icon" ng-show="sortKey === 'Payment'" ng-class="getSortClass()"/>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="trd" title="DbClick to edit" ng-repeat="dto in data" ng-dblclick="openModal(dto)">
                    <td> {{dto.Datum| date:'dd.MM.yyyy'}} </td>
                    <td class="middle"> {{dto.ReportType}} </td>
                    <td> {{dto.Tin}} </td> 
                    <td class="middle"> {{dto.ResCountryCode}} </td>  
                    <td> {{dto.FirstName}} </td> 
                    <td> {{dto.LastName}} </td> 
                    <td> {{dto.Name}} </td> 
                    <td class="middle">{{ dto.CountryCode}} </td> 
                    <td> {{dto.AccountNumber}} </td> 
                    <td class="right"> {{dto.AccountBalance| number:2}} </td> 
                    <td class="right"> {{dto.AccountBalanceUSD| number:2}} </td> 
                    <td class="right"> {{dto.AccountBalanceEUR| number:2}} </td> 
                    <td class="right"> {{dto.Payment| number:2}} </td> 
                </tr>
            </tbody>    
            <tfoot>  
                <tr>  
                    <td align="right" colspan="100%">  
                        <table class="paging-tbl">
                            <tr style="background-color: white;">
                                <td>
                                    <span class="pull-right right">
                                        <ui-select ng-model="pageSizeSelected.selected" onkeypress="return false;" ng-change="changePageSize()" style="min-width:50px">
                                            <ui-select-match>{{$select.selected}}</ui-select-match>
                                            <ui-select-choices repeat="pageSize in PageSizeList | filter:$select.search">
                                                <span ng-bind="pageSize"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </span> 
                                </td>
                                <td>
                                    <div class="pull-right right">   
                                        <pagination total-items="totalCount" 
                                                    ng-change="pageChanged()" 
                                                    items-per-page="pageSizeSelected.selected" 
                                                    direction-links="true" 
                                                    ng-model="pageIndex" 
                                                    max-size="maxSize" 
                                                    class="pagination" 
                                                    boundary-links="true" 
                                                    rotate="false" 
                                                    num-pages="numPages"></pagination>   
                                    </div> 
                                </td>
                                <td>
                                    <table class="page">
                                        <tr style="background-color: white;">
                                            <td>
                                                <a>Page: {{pageIndex}} / {{numPages}}</a>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>  
                </tr>  
            </tfoot>
        </table>    
    </body>
</html>
